angular.module("myApp",["ionic","myApp.Factory","myApp.slideBox","myApp.newsC","myApp.loginC","myApp.direct-seedingC","myApp.searchC","myApp.topic","myApp.mainC","myApp.newsDate"]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,o){o.tabs.position("bottom"),o.tabs.style("standard"),o.navBar.alignTitle("center"),e.state("tabs",{url:"/tabs",abstract:!0,templateUrl:"tabs.html"}),t.otherwise("tabs/news")}]),angular.module("myApp.newsC",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.news",{url:"/news",views:{"tabs-news":{templateUrl:"news.html",controller:"newsController"}}})}]).controller("newsController",["$scope","$location","$state","$ionicViewSwitcher","$ionicScrollDelegate","$ionicSlideBoxDelegate","HttpFactory",function(e,t,o,i,n,l,a){var r="http://c.m.163.com/nc/topicset/ios/subscribe/manage/listspecial.html";a.getData(r).then(function(t){e.numArray1=t.tList,console.log(e.numArray1),e.top1=function(t){console.log(e.numArray1[t].tid);e.numArray1[t].tid}}),e.add1=function(){var e=$(".header1");e.slideToggle("slow")};var c=0;e.news={newsArray:"",newsListArray:[]};var r="http://c.m.163.com/recommend/getSubDocPic?tid=T1348647909107&from=toutiao&offset="+c+"&size=10&fn=1&prog=LMA1&passport=&devId=eW7qcXmjWleAjCxp25EgTBBywawDoVwZiZ9SMikG4cGiOa69wsn%2FdeHaaNGRMr2hIIGNeE0nI41SFrBIaL1THA%3D%3D&lat=DJEPdRawaRYCJZwF3SQobA%3D%3D&lon=7J7OmyytD8SqP0pSV1cJJA%3D%3D";a.getData(r).then(function(t){e.news.newsListArray=t.T1348647909107[0].ads}),e.items=[],e.isShowInfinite=!0,e.loadMore=function(){c=1,c+=10;var t="http://c.m.163.com/recommend/getSubDocPic?tid=T1348647909107&from=toutiao&offset="+c+"&size=10&fn=1&prog=LMA1&passport=&devId=eW7qcXmjWleAjCxp25EgTBBywawDoVwZiZ9SMikG4cGiOa69wsn%2FdeHaaNGRMr2hIIGNeE0nI41SFrBIaL1THA%3D%3D&lat=DJEPdRawaRYCJZwF3SQobA%3D%3D&lon=7J7OmyytD8SqP0pSV1cJJA%3D%3D";a.getData(t).then(function(t){e.items=e.items.concat(t.T1348647909107),c>=40&&(e.isShowInfinite=!1,console.log("到底了！")),e.$broadcast("scroll.infiniteScrollComplete")})},e.doRefresh=function(){var t="http://c.m.163.com/recommend/getSubDocPic?tid=T1348647909107&from=toutiao&offset="+c+"&size=10&fn=1&prog=LMA1&passport=&devId=eW7qcXmjWleAjCxp25EgTBBywawDoVwZiZ9SMikG4cGiOa69wsn%2FdeHaaNGRMr2hIIGNeE0nI41SFrBIaL1THA%3D%3D&lat=DJEPdRawaRYCJZwF3SQobA%3D%3D&lon=7J7OmyytD8SqP0pSV1cJJA%3D%3D";a.getData(t).then(function(t){e.items=t.T1348647909107,e.$broadcast("scroll.refreshComplete")})},e.scrollTop=function(){n.scrollTop()},e.detail=function(t){var n=e.items[t].docid;o.go("newsDate",{data:n}),i.nextDirection("forward")},e.dragOpenSlide=function(){l.$getByHandle("mainSlideBox").enableSlide(!0)},e.slideChanged=function(e){}}]),angular.module("myApp.newsDate",[]).config(["$stateProvider",function(e){e.state("newsDate",{url:"/newsDate",templateUrl:"newsDate.html",controller:"newsDateC",params:{data:null}})}]).controller("newsDateC",["$scope","$stateParams","HttpFactory",function(e,t,o){e.newsData={detail:"",body:""};var i=t.data;console.log(i);var n="http://c.m.163.com/nc/article/"+i+"/full.html";o.getData(n).then(function(t){e.newsData.detail=t[i],console.log(e.newsData.detail);var o=e.newsData.detail;if(o.img&&o.img.length)for(var n=0;n<o.img.length;n++){var l=o.img[n].pixel.split("*")[0];l>document.body.offsetWidth&&(l=document.body.offsetWidth);var a="width:"+l+"px",r="<img style='"+a+"' src="+o.img[n].src+">";o.body=o.body.replace(o.img[n].ref,r),console.log(o.body)}})}]),angular.module("myApp.direct-seedingC",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.direct-seeding",{url:"/direct-seeding",views:{"tabs-direct-seeding":{templateUrl:"direct-seeding.html",controller:"direct-seedingController"}}})}]).controller("direct-seedingController",["$scope","HttpFactory",function(e,t){e.liveTopStyle1={color:"black"},e.changeTopStyle1=function(){e.liveTopStyle1={color:"black"},e.liveTopStyle2={color:"white"},e.liveTopStyle3={color:"white"}},e.changeTopStyle2=function(){e.liveTopStyle1={color:"white"},e.liveTopStyle2={color:"black"},e.liveTopStyle3={color:"white"}},e.changeTopStyle3=function(){e.liveTopStyle1={color:"white"},e.liveTopStyle2={color:"white"},e.liveTopStyle3={color:"black"}},e.news={newsListArray:[]};var o="http://data.live.126.net/livechannel/previewlist.json";t.getData(o).then(function(t){e.news.newsListArray=t.top,e.videos=t.live_review,e.headerArray=t.sublives,e.animas=t.future,console.log(t.future)})}]),angular.module("myApp.topic",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.topic",{url:"/topic",views:{"tabs-topic":{templateUrl:"topic.html",controller:"topicController"}}})}]).controller("topicController",["$scope","HttpFactory",function(e,t){e.liveTopStyle1={color:"black"},e.changeTopStyle1=function(){e.liveTopStyle1={color:"black"},e.liveTopStyle2={color:"white"},e.liveTopStyle3={color:"white"}},e.changeTopStyle2=function(){e.liveTopStyle1={color:"white"},e.liveTopStyle2={color:"black"},e.liveTopStyle3={color:"white"}},e.changeTopStyle3=function(){e.liveTopStyle1={color:"white"},e.liveTopStyle2={color:"white"},e.liveTopStyle3={color:"black"}};var o="http://c.m.163.com/newstopic/list/classification.html";t.getData(o).then(function(t){e.listIteams=t.data,console.log(e.listIteams)});var i=0;e.show1=function(){i++,i%2==0?$(".card").css({height:"85px"}):$(".card").css({height:"308px"}),i%2==0?$("#down").css({"margin-top":"-168px"}):$("#down").css({"margin-top":"55px"}),i%2==0?$("#down").attr("class","ion-ios-arrow-down"):$("#down").attr("class","ion-ios-arrow-up")}}]),angular.module("myApp.searchC",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.search",{url:"/search",views:{"tabs-news":{templateUrl:"search.html"}}})}]),angular.module("myApp.mainC",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.main",{url:"/main",views:{"tabs-main":{templateUrl:"main.html"}}})}]),angular.module("myApp.loginC",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.login",{url:"/login",views:{"tabs-main":{templateUrl:"login.html",controller:"loginController"}}})}]).controller("loginController",["$scope",function(e){}]),angular.module("myApp.slideBox",[]).directive("mgSlideBox",[function(){return{restrict:"E",scope:{sourceArray:"="},templateUrl:"slideBox.html",controller:["$scope","$state","$ionicSlideBoxDelegate","$element",function(e,t,o,i){e.goToDetailView=function(e){console.log("进入详情页"+e)};var n=i[0].lastChild;e.$watch("sourceArray",function(t,i){t&&t.length&&(e.ishowSlideBox=!0,n.innerText=e.sourceArray[0].title,o.$getByHandle("mainSlideBox").enableSlide(!1),e.drag=function(e){o.$getByHandle("mainSlideBox").enableSlide(!1),e.stopPropagation()},e.slideHasChanged=function(t){n.innerText=e.sourceArray[t].title})}),e.imgsrc="http://cms-bucket.nosdn.127.net/ef7bc579fd1640848da7313a9906549720161205111721.jpeg"}],replace:!0}}]),angular.module("myApp.Factory",["ionic"]).factory("HttpFactory",["$http","$q",function(e,t){return{getData:function(o,i){if(o){var n=t.defer();return o="http://localhost:3000/?myUrl="+encodeURIComponent(o),i=i?i:"GET",e({url:o,method:i,timeout:2e4}).then(function(e){e=e.data,n.resolve(e)},function(e){n.reject(e)}),n.promise}}}}]);